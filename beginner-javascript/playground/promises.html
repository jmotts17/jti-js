<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width,initial-scale=1.0">
 <title>Promises</title>
 <link rel="stylesheet" href="../base.css">
</head>
<body>
    <script>
        function makePizza(toppings = []) {
          return new Promise(function (resolve, reject) {
            const amountOfTimeToBake = 500 + toppings.length * 200;
            // wait 1 second for the pizza to cook
            setTimeout(function () {
              // when you are ready, you can resolve this promise
              resolve(`Here is your pizza 🍕 with the toppings ${toppings.join(' ')}`);
            }, 1000);
            // if something went wrong, we can reject this promise
          });
        }

        const pepperoniPromise = makePizza(['pepperoni']);
        const canadianPromise = makePizza(['pepperoni', 'mushrooms', 'onions']);

        // console.log(pepperoniPromise, canadianPromise);
        
        // pepperoniPromise.then(function (pizza) {
        //   console.log('Ahh got it!');
        //   console.log(pizza);
        // });
        console.log('First');
        makePizza(['pepperoni'])
          .then(function (pizza) {
            console.log(pizza);
            return makePizza(['ham', 'cheese']);
          })
          .then(function (pizza) {
            console.log(pizza);
            return makePizza(['hot peppers', 'onion', 'feta']);
          })
          .then(function (pizza) {
            console.log(pizza);
            return makePizza();
          })
          .then(function (pizza) {
            console.log(pizza);
            return makePizza([
              'one',
              'two',
              'three',
              'four',
              'one',
              'two',
              'three',
              'four',
              'one',
              'two',
              'three',
              'four',
              'four',
              'one',
              'two',
              'three',
              'four',
            ]);
          })
          .then(function (pizza) {
            console.log(pizza);
          });
        
        console.log('Right after');

        const pizzaPromise1 = makePizza(['hot peppers', 'onion', 'feta']);
        const pizzaPromise2 = makePizza([
          'one',
          'two',
          'three',
          'four',
          'one',
          'two',
          'three',
          'four',
          'one',
          'two',
          'three',
          'four',
          'four',
          'one',
          'two',
          'three',
          'four',
        ]);
        const pizzaPromise3 = makePizza(['ham', 'cheese']);

        const dinnerPromise = Promise.all([
          pizzaPromise1,
          pizzaPromise2,
          pizzaPromise3,
        ]);

        dinnerPromise.then(function ([hottie, garbagePail, hamAndCheese]) {
          console.log(hottie, garbagePail, hamAndCheese);
        });

        const firstPizzaPromise = Promise.race([
          pizzaPromise1,
          pizzaPromise2,
          pizzaPromise3,
        ]);
        
        firstPizzaPromise.then((pizza) => {
          console.log('You must be hungry, here is the first one ready');
          console.log(pizza);
        });
    </script>
</body>
</html>